import java.util.*;

public class DynamicArrayQuery {
    
    public static void main(String[] args) {

        int lastAns=0; 

        Scanner sc = new Scanner(System.in);
        int numSeqs = sc.nextInt();
        int numQuers = sc.nextInt();
        
        ArrayList<ArrayList<Integer>> seqList = new ArrayList<>(); 
        for(int i=0; i<numSeqs; i++){
            seqList.add(new ArrayList<Integer>());
        }
        
        for(int i=0; i<numQuers ; i++){
            int queryType = sc.nextInt();
            int x = sc.nextInt();
            int y = sc.nextInt(); 
            
            ArrayList<Integer> seq = seqList.get((x^lastAns) % numSeqs);
            if(queryType==1){
                seq.add(new Integer(y)); 
            }else{
                lastAns = seq.get(y % seq.size());
                System.out.println(lastAns);
            }

        }
        sc.close();
        
        
    }
    
}